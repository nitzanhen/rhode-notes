{
  "id": "26",
  "name": "מנמא ממן 1 שאלה 3",
  "body": "## שאלה 3\nהערה: אני מניח שבשני האלגוריתמים, יש בסוף שורה נוספת על הכתוב במטלה, שמחזירה false במידה והאלגוריתם הגיע אליה. \nבנוסף, בהתאם להנחיות מאתר הקורס אני מניח שלא קיים $i$ כך ש-$2A[i]=z$, כלומר שאם $A[i]+A[j]=z$ אז $i\\neq j$ (בפרט, מספיק לבדוק את כל הזוגות שמקיימים $i<j$). נכנה זוג אינדקסים כזה \"זוג טוב\".\n\n#### סעיף א\n**נכונות**: מיון האלגוריתם בשורה הראשונה מאפשר לנו להשתמש בחיפוש בינארי בהמשך. \nאם קיים במערך זוג טוב $i<j$, אזי $A[j]=z-A[i]$, לכן החיפוש הבינארי באיטרציה ה-$i$ יחזיר תשובה חיובית, ובהתאם האלגוריתם מחזיר true. אם לא קיים זוג כזה, אז לכל $i\\neq j$, $A[j]\\neq z-A[i]$. בנוסף מההנחה מתקיים $2A[i]\\neq z$, או באופן שקול $A[i]\\neq z-A[i]$, לכל $i$. לכן, לכל $i$ החיפוש הבינארי עבור $z-A[i]$ יחזיר תשובה שלילית, והאלגוריתם יחזיר false כנדרש.\n\n**סיבוכיות זמן**: סיבוכיות הזמן של מיון-מיזוג במקרה הגרוע היא $\\Theta(n\\log n)$. סיבוכיות הזמן של חיפוש בינארי במקרה הגרוע (שבו האיבר שמחפשים לא נמצא במערך) היא $\\Theta(\\log n)$. לכן, סיבוכיות הזמן של הלולאה במקרה הגרוע – שבו האיבר לא נמצא במערך, כלומר הלולאה עושה את כל $n$ האיטרציות וכולן מחזירות תשובה שלילית – היא $\\Theta(n\\log n)$, ויחד נקבל שסיבוכיות הזמן הכוללת היא $\\Theta(n\\log n)+\\Theta(n\\log n)=\\Theta(n\\log n)$.\n\n**סיבוכיות מקום:** במקרה הגרוע, סיבוכיות המקום של מיון-מיזוג היא $\\Theta(n)$, ושל חיפוש בינארי היא $\\Theta(1)$ בגרסה האיטרטיבית או $\\Theta(\\log n)$ בגרסה הרקורסיבית. כך או כך, סיבוכיות המקום הכוללת היא $\\Theta(n)$. $\\square$\n\n#### סעיף ב\nלשם הנוחות, נרשום את המשתנים $\\operatorname*{P_{left}},\\operatorname*{P_{right}}$ כ-$l,r$ בהתאמה, וב-$n$ את גודל המערך.\n\n**נכונות**: נוכיח את שמורת הלולאה הבאה עבור לולאת ה-while: בתחילת כל איטרציה של לולאת הwhile, אם קיים זוג טוב $i<j$ במערך, אז $i\\ge l, j\\le r$ (באופן שקול, לא קיימים $i<j$ שמקיימים $1\\le i\\lt l, r\\lt j\\le n$ כך ש-$A[i]+A[j]=z$).\nנשים לב שממיינים את המערך בשורה הראשונה, ושהמשך האלגוריתם לא משנה אותו, כך שלאורך כל הלולאה המערך נשאר ממוין.\n\n- **אתחול**: לפני האיטרציה הראשונה, $l=1,r=n$, ומובן שאם קיים זוג אינדקסים $i<j$ כך ש-$A[i]+A[j]=z$ אז $i\\ge 1$ ו-$j\\le n$.\n\n- **תחזוקה**: נניח שהטענה מתקיימת בתחילת איטרציה, ושהלולאה לא יוצאת באמצע האיטרציה. אז לא קיימים $i<j$, $1\\le i\\lt l, r\\lt j\\le n$ כך ש-$A[i]+A[j]=z$, ומצד שני גם $A[l]+A[r]\\neq z$ (אחרת היינו יוצאים מוקדם, והאלגוריתם היה מחזיר true). נסמן ב-$l',r'$ את הערכים של $l,r$ בסוף האיטרציה. נפרק למקרים:\n  - $A[l]+A[r]<z$: אז $l'=l+1,r'=r$. נניח שו-$i\\lt j$ זוג טוב; משמורת הלולאה בהכרח $i\\ge l, j\\le r$. מצד שני עבור $i=l$, לכל $j\\le r$ מתקיים\n$$A[l]+A[j]\\le A[l]+A[r]\\lt z$$\nובפרט לא מתקיים שוויון. כלומר, אם $i<j$ זוג טוב אז בהכרח $i\\le l+1=l',j\\le r=r'$, כנדרש.\n  - $A[l]+A[r]>z$: מטופל באופן דומה – במקרה הזה $l'=l,r'=r-1$. לכל $i\\ge l$ מתקיים\n$$A[i]+A[r]\\ge A[l]+A[r]\\gt z$$\nובפרט אין שוויון. יחד עם שמורת הלולאה, נקבל שאם $i<j$ זוג טוב אזי בהכרח $i\\le l=l', j\\lt r-1=r'$, כנדרש.\n\n- **סיום**: הלולאה יכולה להסתיים משתי סיבות. הלולאה יכולה להסתיים מוקדם – כלומר, בלי שתנאי ההתחלה $l\\lt r$ מפסיק להתקיים – אם נמצא זוג $l\\lt r$ שעבורו מתקיים $A[l]+A[r]=z$, ואז האלגוריתם מחזירה true, כמו שנדרש ממנו.\nמצד שני, אם הלולאה לא מסתיימת מוקדם, כלומר מגיעים למצב ש-$l\\ge r$: משמורת הלולאה במקרה הזה, נקבל שאם יש זוג טוב $i<j$ במערך אז $i\\ge l\\ge r\\ge j$, אבל זו סתירה – לכן לא קיים זוג טוב.\nכלומר, לא ייתכן שהאלגוריתם \"מפספס\" תוצאה חיובית: אם הלולאה רצה עד הסוף, לא קיים במערך זוג טוב.\n\nלסיום, נשים לב שמתקיימת גם שמורת הלולאה הבאה: בתחילת האיטרציה ה-$i$ של לולאת ה-while, מתקיים $r-l=n-i$:\n- בתחילת האיטרציה הראשונה מתקיים $r-l=n-1$.\n- נניח שבתחילת האיטרציה ה-$i$ מתקיים $r-l=n-i$, ונסמן ב-$l',r'$ את הערכים של $l,r$ בסופה. אז $l'=l+1,r'=r$ או $l'=l,r'=r-1$, ובכל מקרה $r'-l'=r-l-1=n-(i+1)$.\n\nשמורת הלולאה הזו מבטיחה לנו שהלולאה עוברת מספר סופי של איטרציות, כלומר שהיא בהכרח מסתיימת: בתחילת האיטרציה ה-$n$ מתקיים $r-l=n-n=0$, כלומר $r=l$, ולכן הלולאה תפסיק. \nאם כן, האלגוריתם פועל כנדרש.\n\n**סיבוכיות זמן**: סיבוכיות הזמן של האלגוריתם במקרה הגרוע היא $\\Theta(n\\log n)$: סיבוכיות הזמן של מיון-מיזוג היא $\\Theta(n\\log n)$. משמורת הלולאה השנייה שהראנו, במקרה הגרוע (שבו אין במערך זוג אינדקסים כנדרש) לולאת ה-while תרוץ עד ש-$l\\ge r$, כלומר $n-1$ איטרציות. כל איטרציה כזו היא $\\Theta(1)$, ולכן זמן הריצה של הלולאה במקרה הגרוע הוא $\\Theta(n)$ – יחד נקבל זמן ריצה כולל של\n$$\\Theta(n\\log n)+\\Theta(n)=\\Theta(\\max{n\\log n,n})=\\Theta(n\\log n)$$\nכנדרש.\n\n**סיבוכיות מקום**: סיבוכיות המקום של מיון-מיזוג היא $\\Theta(n)$, ושאר האלגוריתם משתמש רק בשני משתני עזר, לכן סיבוכיות המקום היא $\\Theta(n)$. $\\square$\n\n#### סעיפים ג+ד\nבמבחן, הייתי מעדיף להשתמש באלגוריתם א' – לשני האלגוריתמים יש סיבוכיות זהה (בסדר גודל) במקרה הגרוע, אבל את הרעיון של אלגוריתם א' הרבה יותר קל להוכיח, בין אם באופן פורמלי או לא.\n\nמצד שני, אם נתון שהקלט לבעיה הוא מערך ממוין, הרעיון של אלגוריתם ב' מוצלח יותר: אם נשמיט משני האלגוריתמים את הקריאה למיון המיזוג בשורה הראשונה, באלגוריתם א' סיבוכיות הזמן תישאר $\\Theta(n\\log n)$, אבל סיבוכיות הזמן של אלגוריתם ב' תרד ל-$\\Theta(n)$, וזה כמובן עדיף בהרבה, על אף שיותר קשה להוכיח את נכונותו."
}